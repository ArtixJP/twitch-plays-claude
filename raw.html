<!DOCTYPE html>

<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com https://esm.sh https://esm.run https://cdn.tailwindcss.com https://threejs.org https://cdn.threejs.org https://cdn.p5js.org https://code.jquery.com https://d3js.org https://cdn.plot.ly https://cdn.tonejs.org; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; media-src 'self' https:; font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; worker-src 'self'; frame-src https://www.youtube.com https://www.youtube-nocookie.com https://player.vimeo.com; connect-src 'self' https: wss: ws:; object-src 'none'; base-uri 'self'; form-action 'self';">
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Bitcoin Beach Sunset üåÖ</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Courier New', monospace; overflow: hidden; background: #1a0a2f; }
#canvas-container { width: 100vw; height: 100vh; position: relative; }
.hud {
    position: absolute; top: 10px; left: 10px; z-index: 100;
    background: rgba(20, 10, 40, 0.4); backdrop-filter: blur(20px);
    padding: 15px 20px; border-radius: 20px;
    border: 1px solid rgba(255, 215, 0, 0.3);
    color: #ffd700; text-shadow: 0 0 10px #ff8c00;
}
.hud h1 { font-size: 1.2rem; margin-bottom: 5px; display: flex; align-items: center; gap: 8px; }
.btc-icon {
    width: 24px; height: 24px; background: linear-gradient(135deg, #f7931a, #ffb84d);
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-weight: bold; color: white; font-size: 14px;
}
.price { font-size: 1.8rem; font-weight: bold; color: #ffd700; text-shadow: 0 0 15px #ff8c00; }
.change { font-size: 0.9rem; margin-top: 5px; }
.beach-overlay {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 30%;
    background: linear-gradient(to top, rgba(244, 214, 164, 0.3) 0%, rgba(255, 228, 181, 0.2) 40%, transparent 100%);
    pointer-events: none; z-index: 50;
}
.chill-message {
    position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%);
    text-align: center; z-index: 100; color: #fff; font-size: 1.5rem;
    text-shadow: 0 0 20px rgba(255, 150, 100, 0.8);
    background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px);
    padding: 20px 30px; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.2);
    animation: breathe 4s ease-in-out infinite;
}
.chill-message .emoji { font-size: 2rem; display: block; margin-bottom: 10px; }
@keyframes breathe { 0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); } 50% { opacity: 1; transform: translateX(-50%) scale(1.05); } }
.beach-items { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 1.8rem; z-index: 100; }
.time-display { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); color: #ffcc88; font-size: 1rem; text-shadow: 0 0 10px #ff8800; z-index: 100; }
.instruction { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #666; font-size: 0.7rem; text-align: center; z-index: 100; }
.instruction code { background: rgba(145, 71, 255, 0.2); padding: 2px 6px; border-radius: 4px; color: #bf94ff; }
.audio-indicator {
    position: absolute; top: 10px; right: 10px; z-index: 100; color: #00ccff;
    font-size: 0.8rem; cursor: pointer; background: rgba(0, 150, 200, 0.2);
    padding: 8px 12px; border-radius: 8px; border: 1px solid rgba(0, 200, 255, 0.4);
}
.audio-indicator.playing { color: #00ff88; border-color: rgba(0, 255, 136, 0.4); text-shadow: 0 0 10px #00ff88; }
.alien-tourist { position: absolute; z-index: 140; text-align: center; animation: alien-chill 5s ease-in-out infinite; }
.alien-tourist .alien-body { font-size: 2rem; filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.6)); }
.alien-tourist .speech { background: rgba(0, 255, 136, 0.15); padding: 4px 8px; border-radius: 10px; font-size: 0.55rem; color: #00ff88; border: 1px solid rgba(0, 255, 136, 0.3); margin-top: 4px; }
.alien-1 { bottom: 100px; left: 30px; }

.stickman-home {
    position: absolute; bottom: 60px; right: 40px; z-index: 130;
    text-align: center;
}
.tiki-hut {
    font-size: 2.5rem; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
    animation: hut-sway 6s ease-in-out infinite;
}
.hut-label {
    font-size: 0.5rem; color: #f4d6a4; margin-top: -5px;
    text-shadow: 0 0 5px rgba(139, 69, 19, 0.8);
}
@keyframes hut-sway { 0%, 100% { transform: rotate(-0.5deg); } 50% { transform: rotate(0.5deg); } }

.stickman-container {
    position: absolute; bottom: 70px; right: 120px; z-index: 135;
    text-align: center;
}
.stickman {
    font-size: 1.8rem; filter: drop-shadow(0 0 8px rgba(255, 200, 100, 0.5));
    animation: stickman-idle 2s ease-in-out infinite;
}
.stickman-speech {
    position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.9); color: #333; padding: 6px 10px;
    border-radius: 12px; font-size: 0.6rem; white-space: nowrap;
    border: 2px solid #ffd700; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    animation: speech-bounce 3s ease-in-out infinite;
}
.stickman-speech::after {
    content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
    border: 6px solid transparent; border-top-color: rgba(255, 255, 255, 0.9);
}
.stickman-name {
    font-size: 0.5rem; color: #ffd700; margin-top: 2px;
    text-shadow: 0 0 5px #ff8c00;
}
@keyframes stickman-idle {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-3px) rotate(2deg); }
    50% { transform: translateY(0) rotate(0deg); }
    75% { transform: translateY(-2px) rotate(-2deg); }
}
@keyframes speech-bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-3px); }
}
@keyframes alien-chill { 0%, 100% { transform: translateY(0) rotate(-2deg); } 50% { transform: translateY(-8px) rotate(2deg); } }
</style>
</head>
<body>
<div id="canvas-container"></div>
<div class="beach-overlay"></div>
<div class="hud">
<h1><span class="btc-icon">‚Çø</span> BEACH BAR</h1>
<div class="price" id="price">$67,432</div>
<div class="change" id="change">‚ñ≤ +2.34%</div>
</div>
<div class="time-display">üåÖ Golden Hour</div>
<div class="chill-message">
<span class="emoji">üå¥‚òÄÔ∏èüåä</span>
<div>Just breathe... You're on Bitcoin Beach</div>
</div>
<div class="beach-items">üèñÔ∏è üå¥ üçπ ü¶Ä ‚õ±Ô∏è</div>
<div class="alien-tourist alien-1">
<span class="alien-body">üëΩüçπ</span>
<div class="speech">Earth sunsets hit different üåÖ</div>
</div>
<div class="stickman-home">
<div class="tiki-hut">üõñ</div>
<div class="hut-label">Steve's Hut</div>
</div>
<div class="stickman-container" id="stickman">
<div class="stickman-speech" id="stickman-speech">Ahh, beach life! üèñÔ∏è</div>
<div class="stickman" id="stickman-body">üßç</div>
<div class="stickman-name">Stickman Steve</div>
</div>
<div class="audio-indicator" id="audio-toggle">üåä Ocean Waves</div>
<p class="instruction">Type <code>!idea your idea</code> in chat to modify this world</p>
<script>
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0xff7744, 50, 300);
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(-15, 4, 15);
camera.lookAt(5, 0, 30);
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0xff6b35);
document.getElementById('canvas-container').appendChild(renderer.domElement);

// Sky
const skyGeo = new THREE.SphereGeometry(500, 32, 32);
const skyCanvas = document.createElement('canvas');
skyCanvas.width = 512; skyCanvas.height = 256;
const skyCtx = skyCanvas.getContext('2d');
const skyGrad = skyCtx.createLinearGradient(0, 0, 0, 256);
skyGrad.addColorStop(0, '#1a0a3a'); skyGrad.addColorStop(0.3, '#ff4500');
skyGrad.addColorStop(0.5, '#ff6b35'); skyGrad.addColorStop(0.7, '#ffa07a'); skyGrad.addColorStop(1, '#ffcc88');
skyCtx.fillStyle = skyGrad; skyCtx.fillRect(0, 0, 512, 256);
const sunGrad = skyCtx.createRadialGradient(256, 140, 0, 256, 140, 40);
sunGrad.addColorStop(0, '#fffacd'); sunGrad.addColorStop(0.3, '#ffd700'); sunGrad.addColorStop(1, 'transparent');
skyCtx.fillStyle = sunGrad; skyCtx.fillRect(0, 0, 512, 256);
const sky = new THREE.Mesh(skyGeo, new THREE.MeshBasicMaterial({ map: new THREE.CanvasTexture(skyCanvas), side: THREE.BackSide }));
scene.add(sky);

// Ocean with shader
const oceanGeo = new THREE.PlaneGeometry(500, 500, 64, 64);
const oceanMat = new THREE.ShaderMaterial({
    uniforms: { uTime: { value: 0 }, uDeepColor: { value: new THREE.Color(0x003366) }, uShallowColor: { value: new THREE.Color(0x0088aa) }, uSunsetColor: { value: new THREE.Color(0xff6633) } },
    vertexShader: `uniform float uTime; varying vec2 vUv; varying float vElevation;
        void main() { vUv = uv; vec3 pos = position;
            float wave = sin(pos.x * 0.05 + uTime) * cos(pos.y * 0.03 + uTime * 0.7) * 1.5;
            wave += sin(pos.x * 0.1 + uTime * 1.5) * 0.5;
            vElevation = wave; pos.z += wave;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0); }`,
    fragmentShader: `uniform vec3 uDeepColor; uniform vec3 uShallowColor; uniform vec3 uSunsetColor;
        varying float vElevation; varying vec2 vUv;
        void main() { float depth = smoothstep(-1.0, 2.0, vElevation);
            vec3 color = mix(uDeepColor, uShallowColor, depth);
            color = mix(color, uSunsetColor, smoothstep(0.6, 0.0, vUv.y) * 0.5);
            color += vec3(1.0, 0.9, 0.7) * smoothstep(0.8, 1.5, vElevation) * 0.4;
            gl_FragColor = vec4(color, 0.92); }`,
    transparent: true, side: THREE.DoubleSide
});
const ocean = new THREE.Mesh(oceanGeo, oceanMat);
ocean.rotation.x = -Math.PI / 2; ocean.position.y = -0.5;
scene.add(ocean);

// Beach
const beach = new THREE.Mesh(new THREE.PlaneGeometry(100, 50), new THREE.MeshPhongMaterial({ color: 0xf4d6a4 }));
beach.rotation.x = -Math.PI / 2; beach.position.set(0, -0.3, 30);
scene.add(beach);

// Palm trees
function createPalm(x, z) {
    const g = new THREE.Group();
    g.add(new THREE.Mesh(new THREE.CylinderGeometry(0.15, 0.25, 4, 8), new THREE.MeshPhongMaterial({ color: 0x8b4513 })));
    g.children[0].position.y = 2;
    for (let i = 0; i < 6; i++) {
        const leaf = new THREE.Mesh(new THREE.ConeGeometry(0.3, 2, 4), new THREE.MeshPhongMaterial({ color: 0x228b22 }));
        leaf.position.y = 4; leaf.rotation.z = (i / 6) * Math.PI * 2; leaf.rotation.x = Math.PI / 3;
        g.add(leaf);
    }
    g.position.set(x, 0, z); return g;
}
scene.add(createPalm(-8, 25)); scene.add(createPalm(10, 28)); scene.add(createPalm(-12, 32));

// Lights
scene.add(new THREE.AmbientLight(0xffa07a, 0.6));
const sunLight = new THREE.DirectionalLight(0xffd700, 1);
sunLight.position.set(0, 10, -50); scene.add(sunLight);

// Seagulls
const birds = [];
for (let i = 0; i < 3; i++) {
    const bird = new THREE.Mesh(new THREE.ConeGeometry(0.1, 0.4, 3), new THREE.MeshBasicMaterial({ color: 0xffffff }));
    bird.position.set((Math.random() - 0.5) * 80, 15 + Math.random() * 8, (Math.random() - 0.5) * 80);
    bird.userData = { speed: 0.04 + Math.random() * 0.03, offset: Math.random() * Math.PI * 2 };
    scene.add(bird); birds.push(bird);
}

// Audio
let audioCtx = null, audioOn = false;
document.getElementById('audio-toggle').onclick = () => {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const buf = audioCtx.createBuffer(1, audioCtx.sampleRate * 2, audioCtx.sampleRate);
        const d = buf.getChannelData(0); for (let i = 0; i < d.length; i++) d[i] = Math.random() * 2 - 1;
        const src = audioCtx.createBufferSource(); src.buffer = buf; src.loop = true;
        const flt = audioCtx.createBiquadFilter(); flt.type = 'lowpass'; flt.frequency.value = 400;
        const gain = audioCtx.createGain(); gain.gain.value = 0.12;
        src.connect(flt); flt.connect(gain); gain.connect(audioCtx.destination); src.start();
        audioOn = true;
    } else {
        if (audioCtx.state === 'running') { audioCtx.suspend(); audioOn = false; }
        else { audioCtx.resume(); audioOn = true; }
    }
    const el = document.getElementById('audio-toggle');
    el.textContent = audioOn ? 'üîä Ocean Waves' : 'üîá Paused';
    el.classList.toggle('playing', audioOn);
};

// Bitcoin price
let price = 67432;
setInterval(() => {
    price += (Math.random() - 0.48) * 100;
    price = Math.max(60000, Math.min(75000, price));
    document.getElementById('price').textContent = '$' + Math.floor(price).toLocaleString();
    const chg = ((price - 67432) / 67432 * 100).toFixed(2);
    const up = chg >= 0;
    document.getElementById('change').textContent = (up ? '‚ñ≤ +' : '‚ñº ') + Math.abs(chg) + '%';
    document.getElementById('change').style.color = up ? '#00ff88' : '#ff6666';
}, 3000);

// Animation
function animate() {
    requestAnimationFrame(animate);
    const t = Date.now() * 0.001;
    ocean.material.uniforms.uTime.value = t;
    // Gentle sway while keeping village in view
    camera.position.x = -15 + Math.sin(t * 0.1) * 0.5;
    camera.position.y = 4 + Math.sin(t * 0.15) * 0.2;
    camera.lookAt(5, 0, 30);
    birds.forEach(b => { b.position.x += b.userData.speed; b.position.y += Math.sin(t * 2 + b.userData.offset) * 0.02; if (b.position.x > 50) b.position.x = -50; });
    sky.rotation.y += 0.0001;
    renderer.render(scene, camera);
}
animate();

window.onresize = () => { camera.aspect = innerWidth / innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth, innerHeight); };

// Stickman Steve - Autonomous Beach Resident
const steveActions = [
    { pose: 'üßç', speech: 'Ahh, beach life! üèñÔ∏è' },
    { pose: 'üèÉ', speech: 'Morning jog time!' },
    { pose: 'üßò', speech: 'Namaste... üßò‚Äç‚ôÇÔ∏è' },
    { pose: 'üíÉ', speech: 'Sunset dance! üåÖ' },
    { pose: 'üèÑ', speech: 'Surf\'s up dude!' },
    { pose: 'üßç', speech: 'Watching the waves...' },
    { pose: 'ü§∏', speech: 'Beach gymnastics!' },
    { pose: 'üßç', speech: 'BTC looking good! üìà' },
    { pose: 'üö∂', speech: 'Strolling to my hut...' },
    { pose: 'üßç', speech: 'Chat can tell me what to do!' },
    { pose: 'üôÜ', speech: 'Stretching it out~' },
    { pose: 'üßç', speech: 'Life is good here üòé' }
];
let currentSteveAction = 0;
let steveTask = null;

function updateSteve() {
    const body = document.getElementById('stickman-body');
    const speech = document.getElementById('stickman-speech');
    if (steveTask) {
        speech.textContent = steveTask;
        body.textContent = 'üèÉ';
    } else {
        currentSteveAction = Math.floor(Math.random() * steveActions.length);
        const action = steveActions[currentSteveAction];
        body.textContent = action.pose;
        speech.textContent = action.speech;
    }
}

// Steve changes action every 4 seconds
setInterval(updateSteve, 4000);

// Global function for chat to control Steve
window.commandSteve = function(task) {
    steveTask = task;
    updateSteve();
    setTimeout(() => { steveTask = null; }, 8000);
};
</script>
</body>
</html>